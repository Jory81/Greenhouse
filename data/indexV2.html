<!DOCTYPE html>
<html>
<head>
<script src="https://code.jquery.com/jquery.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="styleV2.css"> 
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
</head>
<body>
<br>
<div class='time-frame'>
	<div>
    <span id='date-part'></span>
    <span> &nbsp  / &nbsp  </span>
    <span id='time-part'></span>
	
	<span id="checkbox4">
	<input class="ckeckbox-element" type="checkbox" id="1I1" onclick="updateButton('1I1')"/>  
	<i class="glyphicon glyphicon-volume-off"></i>
	</span>  
	
	</div>
	
	<div>	
	<h3>settings:</h3>
	</div>
	<div>	
	<span class="dht-labels">temperature</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z1" onclick="openTab('1Z1', event, 'tempcontrol')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>

	<span class="dht-labels">humidty</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z2" onclick="openTab('1Z2', event, 'humidcontrol')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>	
		
	<span class="dht-labels">air flow</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z3" onclick="openTab('1Z3', event, 'fancontrol')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>	
	
	<span class="dht-labels">lights</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z4" onclick="openTab('1Z4', event, 'lightcontrol')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>	
	<div>
	
	<span class="dht-labels">relay control</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z5" onclick="openTab('1Z5', event, 'relaycontrol')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>	
	
	<span class="dht-labels">system settings</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z6" onclick="openTab('1Z6', event, 'systemsettings')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>
	
	<span class="dht-labels">calibration</span>
	<span class="tab">
	<span id="checkbox3">
	<input class="ckeckbox-element" type="checkbox" id="1Z7" onclick="openTab('1Z7', event, 'calsettings')"/>  
	<i class="glyphicon glyphicon-pencil"></i>
	</span>

	</div>
</div>
<hr>
<div id="tempcontrol" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>

	<h4>Soil temp.1</h4>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="input Soil Temp 1" class="form-controlx input-sl" id="targetSoilTemp1" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('targetSoilTemp1', targetSoilTemp1.value)" class="btnx btn-primary">_targetSoilTemp1</button> </span>
	</div>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="temp range 1" class="form-controlx input-sl" id="tempRange1" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('tempRange1', tempRange1.value)" class="btnx btn-primary">_tempRange1</button> </span>
	</div>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="alarm range 1" class="form-controlx input-sl" id="alarmRange1" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('alarmRange1', alarmRange1.value)" class="btnx btn-primary">_alarmRange1</button> </span>
	<span id="checkbox1">
	<input class="ckeckbox-element" type="checkbox" id="soilAlarm1" onclick="updateButton(this.id, this.checked)"/>  
	<i class="glyphicon glyphicon-bell"></i>	
	</span>
	</div>	
	
	<h4>Air temp 1</h4>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="input Air Temp 1" class="form-controlx input-sl" id="targetAirTemp1" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('targetAirTemp1', targetAirTemp1.value)" class="btnx btn-primary">_targetAirTemp1</button> </span>
	<span id="checkbox1">
	<input class="ckeckbox-element" type="checkbox" id="airAlarm1" onclick="updateButton(this.id, this.checked)"/>  
	<i class="glyphicon glyphicon-bell"></i>	
	</span>
	</div>
	<br>
	
	<h4>Soil temp.2</h4>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="input Soil Temp 2" class="form-controlx input-sl" id="targetSoilTemp2" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('targetSoilTemp2', targetSoilTemp2.value)" class="btnx btn-primary">_targetSoilTemp2</button> </span>
	</div>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="temp range 2" class="form-controlx input-sl" id="tempRange2" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('tempRange2', tempRange2.value)" class="btnx btn-primary">_tempRange2</button> </span>
	</div>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="alarm range 2" class="form-controlx input-sl" id="alarmRange2" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('alarmRange2', alarmRange2.value)" class="btnx btn-primary">_alarmRange2</button> </span>
	<span id="checkbox1">
	<input class="ckeckbox-element" type="checkbox" id="soilAlarm2" onclick="updateButton(this.id, this.checked)"/>  
	<i class="glyphicon glyphicon-bell"></i>	
	</span>
	</div>	

	<h4>Air temp 2</h4>
	<div class="inputcontainer">
	<span class="inputparam"> <input type="number" placeholder="input Air Temp 2" class="form-controlx input-sl" id="targetAirTemp2" value=""></span> <sup class="units">&deg;C</sup>
	<span><button onclick="updateNumber('targetAirTemp2', targetAirTemp2.value)" class="btnx btn-primary">_targetAirTemp2</button> </span>
	<span id="checkbox1">
	<input class="ckeckbox-element" type="checkbox" id="airAlarm2" onclick="updateButton(this.id, this.checked)"/>  
	<i class="glyphicon glyphicon-bell"></i>	
	</span>
	</div>
	<hr>
</div>

<div id="fancontrol" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>

		<h4>fan</h4>
			
			<div>
			<span class="textinfo">manual mosfet control (1)</span>
			<input type="checkbox" id="manualMosfet1" onclick="updateButton(this.id, this.checked)"> 
			</div>
			
			<div>
			<label class="slidercontainerx">	
			<input id="manualFanspeed1" type="range" class="slider" min="0" max="255" step="1" value="128" onchange="updateSlider(this.id, this.value)">
			</label>
			</div>

			<div>
			<span class="textinfo">manual mosfet control (2)</span>
			<input type="checkbox" id="manualMosfet2" onclick="updateButton(this.id, this.checked)"> 
			</div>
			
			<div>
			<label class="slidercontainerx">	
			<input id="manualFanspeed2" type="range" class="slider" min="0" max="255" step="1" value="128" onchange="updateSlider(this.id, this.value)">
			</label>
			</div> 

  
  	<hr>
</div>

<div id="relaycontrol" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>
  
  <h4>manual relay control</h4>
  			<div>
			<span class="textinfo">relay 1: soil 1</span>
			<input type="checkbox" id="manualRelay1" onclick="updateButton(this.id, this.checked)"> 
			</div>
			<div>
			<span class="textinfo">relay 2: soil 2</span>
			<input type="checkbox" id="manualRelay2" onclick="updateButton(this.id, this.checked)"> 
			</div>
			<div>
			<span class="textinfo">relay 3: lights 1</span>
			<input type="checkbox" id="manualRelay3" onclick="updateButton(this.id, this.checked)"> 
			</div>
			<div>
			<span class="textinfo">relay 4: lights 2</span>
			<input type="checkbox" id="manualRelay4" onclick="updateButton(this.id, this.checked)"> 
			</div>
			<div>
			<span class="textinfo">relay 5: humidty /optional</span>
			<input type="checkbox" id="manualRelay5" onclick="updateButton(this.id, this.checked)"> 
			</div>
			<div>
			<span class="textinfo">relay 6: humidty /optional</span>
			<input type="checkbox" id="manualRelay6" onclick="updateButton(this.id, this.checked)"> 
			</div>
					
  	<hr>
</div>

<div id="lightcontrol" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>
  
  	<h4>Lights:</h4>
	<p>
	Light 1 on: <input class="timeMakeup" type="time" id="lights1on">
	Light 1 off: <input class="timeMakeup" type="time" id="lights1off">
	&nbsp
	<span><button onclick="updateTime('lights1ON', lights1on.value,'lights1OFF', lights1off.value)" class="btnx btn-primary">_LightSchedule1</button></span>
	</p>
	<p>
	Light 2 on: <input class="timeMakeup" type="time" id="lights2on">
	Light 2 off: <input class="timeMakeup" type="time" id="lights2off">
	&nbsp
	<span><button onclick="updateTime('lights2ON', lights2on.value,'lights2OFF', lights2off.value)" class="btnx btn-primary">_LightSchedule2</button></span>
	</p>	
  
  	<hr>
</div>

<div id="humidcontrol" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>

<h4>humid probes</h4>
	<div class="inputcontainer">
		<span class="inputparam"> <input type="number" placeholder="input humidity min. 1" class="form-controlx input-sl" id="humidMin1" value=""></span><span class="units">(%)</span>
		<span><button onclick="updateNumber('_humidMin1', humidMin1.value)" class="btnx btn-primary">_humidMin1</button> </span>
	</div>
	<div class="inputcontainer">
		<span class="inputparam"> <input type="number" placeholder="input humidity max. 1" class="form-controlx input-sl" id="humidMax1" value=""></span><span class="units">(%)</span>
		<span><button onclick="updateNumber('_humidMax1', humidMax1.value)" class="btnx btn-primary">_humidMax1</button> </span>
	</div>	
	<br>
	<div class="inputcontainer">
		<span class="inputparam"> <input type="number" placeholder="input humidity min. 2" class="form-controlx input-sl" id="humidMin2" value=""></span><span class="units">(%)</span>
		<span><button onclick="updateNumber('_humidMin2', humidMin2.value)" class="btnx btn-primary">_humidMin2</button> </span>
	</div>	
	<div class="inputcontainer">
		<span class="inputparam"> <input type="number" placeholder="input humidity max. 2" class="form-controlx input-sl" id="humidMax2" value=""></span><span class="units">(%)</span>
		<span><button onclick="updateNumber('_humidMax2', humidMax2.value)" class="btnx btn-primary">_humidMax2</button> </span>
	</div>		
	<hr>
</div>

<div id="calsettings" class="tabcontent">
<h4>calibration settings:</h4>
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 1" class="form-controlx input-sl" id="calValue1" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue1', calValue1.value)" class="btnx btn-primary">_calValue1</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 2" class="form-controlx input-sl" id="calValue2" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue2', calValue2.value)" class="btnx btn-primary">_calValue2</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 3" class="form-controlx input-sl" id="calValue3" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue3', calValue3.value)" class="btnx btn-primary">_calValue3</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 4" class="form-controlx input-sl" id="calValue4" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue4', calValue4.value)" class="btnx btn-primary">_calValue4</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 5" class="form-controlx input-sl" id="calValue5" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue5', calValue1.value)" class="btnx btn-primary">_calValue5</button> </span>
		</div>
		<br><h4>DHT temp sensor (temperature)</h4>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 6" class="form-controlx input-sl" id="calValue6" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue6', calValue6.value)" class="btnx btn-primary">_calValue6</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 7" class="form-controlx input-sl" id="calValue7" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue7', calValue7.value)" class="btnx btn-primary">_calValue7</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 8" class="form-controlx input-sl" id="calValue8" value=""></span> <sup class="units">&deg;C</sup>
			<span><button onclick="updateNumber('calValue8', calValue8.value)" class="btnx btn-primary">_calValue8</button> </span>
		</div>
		<br><h4>DHT temp sensor (humidity)</h4>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 9" class="form-controlx input-sl" id="calValue9" value=""></span><span class="units">(%)</span>
			<span><button onclick="updateNumber('calValue9', calValue9.value)" class="btnx btn-primary">_calValue9</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 10" class="form-controlx input-sl" id="calValue10" value=""></span><span class="units">(%)</span>
			<span><button onclick="updateNumber('calValue10', calValue10.value)" class="btnx btn-primary">_calValue10</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input cal. 11" class="form-controlx input-sl" id="calValue11" value=""></span><span class="units">(%)</span>
			<span><button onclick="updateNumber('calValue11', calValue11.value)" class="btnx btn-primary">_calValue11</button> </span>
		</div>
        <br><h4>PID parameters</h4>	
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input KP or MIN" class="form-controlx input-sl" id="calValue12" value=""></span>
			<span><button onclick="updateNumber('calValue12', calValue12.value)" class="btnx btn-primary">_input KP or MIN Fanspeed%</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input KI or MAX" class="form-controlx input-sl" id="calValue13" value=""></span>
			<span><button onclick="updateNumber('calValue13', calValue13.value)" class="btnx btn-primary">_input KI or MAX Fanspeed%</button> </span>
		</div>
		<div class="inputcontainer">
			<span class="inputparam"> <input type="number" placeholder="input KD (-)" class="form-controlx input-sl" id="calValue14" value=""></span>
			<span><button onclick="updateNumber('calValue14', calValue14.value)" class="btnx btn-primary">_input KD (-)</button> </span>
		</div>	
		<hr>
</div>

<div id="systemsettings" class="tabcontent">
  <span onclick="toggleoff(this.parentElement)" class="topright">&times</span>
	<h4>system settings:</h4>	
	<p>	
	<span class="inputparam">
	<select name="selectProbeType" id="probe_id" onchange="selectProbeTType(this)">
    <option value="1" >PT100</option>
    <option value="2" >Thermokoppel</option>
	</select>
	</span>
	<br>
	<br>
	<span class="inputparam">
	<select name="selectProbeAmount" id="probe_number" onchange="selectProbeTAmount(this)">
    <option value="1" >1 probe</option>
    <option value="2" >2 probes</option>
	<option value="3" >3 probes</option>
	<option value="4" >4 probes</option>
	<option value="5" >5 probes</option>
	</select>	
	</span>
	<br>
	<br>
	<span class="inputparam">
	<select name="selectProbeType" id="probe_id" onchange="selectProbeHType(this)">
    <option value="0" >DHT22</option>
	</select>
	</span>
	<br>
	<br>
	<span class="inputparam">
	<select name="selectProbeAmount" id="probe_numberH" onchange="selectProbeHAmount(this)">
    <option value="0" >no probes</option>
	<option value="1" >1 probe</option>
    <option value="2" >2 probes</option>
	<option value="3" >3 probes</option>
	</select>	
	</span>
	<br>
	<br>
	<span class="inputparam">
	<select name="selectProbeAmount" id="operation_mode" onchange="selectOperationMode(this)">
	<option value="1" >1 microclimate</option>
    <option value="2" >2 microclimates</option>
	<option value="3" >unity (synced)</option>
	</select>	
	</span>
	<br>
	<br>	
	</p>	
	<h4>graph update:</h4>
	<p>
	<span class="inputparam">
	<select name="selectProbeAmount" id="graph_time" onchange="selectUpdateGraphTime(this)">
    <option value="1" >every second</option>
    <option value="2" >every 2 seconds</option>
	<option value="5" >every 5 seconds</option>
	<option value="30" >every 30 seconds</option>
	<option value="60" >every minute</option>
	<option value="120" >every 2 minutes</option>
	<option value="300" >every 5 minutes</option>
	</select>	
	</span>
	<br>
	<br>
	</p>

	<div>
		<span id="checkbox1">PID control (checked) or linear control
		<input class="ckeckbox-element" type="checkbox" id="1X1" onclick="updateButton('1X1')"/>  
		<i class="glyphicon glyphicon-tasks"></i>
		</span> 
	</div>		

	<br>
	

	<div class="inputcontainer">
		<span class="inputparam"> <input type="text" placeholder="input Wifi ID" class="form-controlx input-sl" id="ssid" value=""></span> <span><button onclick="updateTemp('I')" class="btnx btn-primary">_submit</button> </span>	<span id="SSID"></span>
	</div>
	<div class="inputcontainer">
		<span class="inputparam"> <input type="text" placeholder="input Wifi pass" class="form-controlx input-sl" id="pass" value=""></span> <span><button onclick="updateTemp('P')" class="btnx btn-primary">_submit</button> </span>	<span id="PASS"></span>
	</div>

	<div>
	<span id="checkbox1">reboot &nbsp
	<input class="ckeckbox-element" type="checkbox" id="1U1" onclick="updateButton('1U1')"/>  
	<i class="glyphicon glyphicon-refresh"></i>
	</span> 
	</div>	
	<hr>
</div>

	<div class="inline">
		<h3>climate 1</h3>
		
		<p>
		<span class="dht-labels">Soil temp:</span> 
		<span id="temperature1"></span>
		<sup class="units">&deg;C</sup>
		<span id="checkbox4">
		<input class="ckeckbox-element" type="checkbox" id="heater1" onclick="updateButton(this.id, this.checked)" />  
		&nbsp;
		<i class="fas fa-thermometer-half"></i>
		</span> 
		</p>	
		
		<p>
		<span class="dht-labels">Air temp:</span> 
		<span id="temperature6"></span>
		<sup class="units">&deg;C</sup>	
		</p>
		
		<p>		
		<span class="dht-labels">Fanspeed</span> 		
		<span id="fanspeed1"></span>
		<span class="dht-labels">%</span> 	
		<span id="checkbox2">
		<input class="ckeckbox-element" type="checkbox" id="fan1" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp;
		<i class="fas fa-atom"></i>
		</span> 
		</p>
		
		<p>
		<span class="dht-labels">Rel. humidity: </span> 
		<span id="humidity1"></span>
		<span class="units">(%)</span>	
		<span id="checkbox1">
		<input class="ckeckbox-element" type="checkbox" id="humidifier1" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp
		<i class="glyphicon glyphicon-leaf"></i>
		</span> 
		</p>
		
		<p>
		<span class="dht-labels">light schedule: </span>
		<span><input class="timeMakeup" type="time"id="lights1ON"></span><span><input class="timeMakeup" type="time" id="lights1OFF"></span>
		<span id="checkbox5">
		<input class="ckeckbox-element" type="checkbox" id="lights1" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp;
		<i class="glyphicon glyphicon-asterisk"></i>
		</span> 
		</p>
		<br>
		
		<p>
		<span class="dht-labels">additional temp. sensor 2:</span> 
		<span id="temperature2"></span>
		<sup class="units">&deg;C</sup>	
		</p>
	</div>

	<div class="inline">
		<h3>climate 2</h3>
		
		<p>
		<span class="dht-labels">Soil temp:</span> 
		<span id="temperature3"></span>
		<sup class="units">&deg;C</sup>
		<span id="checkbox4">
		<input class="ckeckbox-element" type="checkbox" id="heater2" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp;
		<i class="fas fa-thermometer-half"></i>
		</span> 
		</p>	
		
		<p>
		<span class="dht-labels">Air temp:</span> 
		<span id="temperature7"></span>
		<sup class="units">&deg;C</sup>
			
		</p>
		<p>		
		<span class="dht-labels">Fanspeed</span> 		
		<span id="fanspeed2"></span>
		<span class="dht-labels">%</span> 		
		<span id="checkbox2">
		<input class="ckeckbox-element" type="checkbox" id="fan2" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp;
		<i class="fas fa-atom"></i>
		</span> 
		</p>
		
		<p>
		<span class="dht-labels">Rel. humidity: </span> 
		<span id="humid1"></span>
		<span class="units">(%)</span>	
		<span id="checkbox1">
		<input class="ckeckbox-element" type="checkbox" id="humidifier2" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp
		<i class="glyphicon glyphicon-leaf"></i>
		</span> 
		</p>
		
		<p>
		<span class="dht-labels">light schedule: </span>
		<span><input class="timeMakeup" type="time"id="lights2ON"></span><span><input class="timeMakeup" type="time" id="lights2OFF"></span>
		<span id="checkbox5">
		<input class="ckeckbox-element" type="checkbox" id="lights2" onclick="updateButton(this.id, this.checked)"/>  
		&nbsp;
		<i class="glyphicon glyphicon-asterisk"></i>
		</span> 
		</p>
		<br>
		
		<p>
		<span class="dht-labels">additional temp. sensor 2:</span> 
		<span id="temperature4"></span>
		<sup class="units">&deg;C</sup>			
		</p>

	</div>

    <div id="chart-temperature" class="container">
	</div>
	<hr>
	
<script>	

var gateway = `ws://${window.location.hostname}/ws`;
var websocket;

console.log(gateway);

var k = 10;
var residuFloat = 0; 

var humidmin = 30;
var humidmax = 80;
var humidmin2 = 30;
var humidmax2 = 80;

var hourStart = 05;
var minuteStart = 30;
var hourStop = 20;
var minuteStop = 30;

var hourStart2 = 05;
var minuteStart2 = 30;
var hourStop2 = 20;
var minuteStop2 = 30;

var targetCelsius1=0;
var targetCelsius2=0;
var targetCelsius3=0;
var targetCelsius4=0;

var offsetFromTargetTempMax=0;
var offsetFromTargetTempMin=0;
var offsetFromTargetTempMax2=0;
var offsetFromTargetTempMin2=0;

var fanSpeed1=0;
var fanSpeed2=0;

var humidity1=0;
var humidity2=0;

var soiltemp1=0;
var soiltemp2=0;

var airtemp1=0;
var airtemp2=0;

var timer1Counter=0;
var timer2Counter=0;
var numberofRingsAlarm1=0;
var numberofRingsAlarm2=0;
var refreshIntervalId1=0;
var refreshIntervalId2=0;

window.addEventListener('load', onLoad);

function onLoad(event) {
	
    initWebSocket();
//    initButton();
}

// ----------------------------------------------------------------------------
// WebSocket handling
// ----------------------------------------------------------------------------

function initWebSocket() {
    console.log('Trying to open a WebSocket connection...');
    websocket = new WebSocket(gateway);
    websocket.onopen    = onOpen;
    websocket.onclose   = onClose;
    websocket.onmessage = onMessage;
}
 
// Called when a WebSocket connection is established with the server

function onOpen(event) {
 
    // Log connection state
    console.log("Connected");
	//document.getElementById("SetTab2").style.display = "none";	
	document.getElementById("1U1").checked = true;
	k = 0;
	doSend("GGG"+k);

}
 
// Called when the WebSocket connection is closed
function onClose(event) {
    console.log('Connection closed');
    setTimeout(initWebSocket, 2000);
}

function updateNumber(key, value) {
	var field = key;
	var obj = {};
	obj[field] = value;
	var myJSON = JSON.stringify(obj);
	websocket.send(myJSON);  
	//console.log(myJSON);
}

function updateSlider(key, value){
	document.getElementById(key).innerHTML = value;
	var field = key;
	var obj = {};
	obj[field] = value;
	var myJSON = JSON.stringify(obj);
	websocket.send(myJSON);
	//console.log(myJSON);	
}

function updateButton(key, value) {
	var field = key;
	var obj = {};
	obj[field] = value;
	var myJSON = JSON.stringify(obj);
	websocket.send(myJSON);
	//console.log(myJSON);
}

function updateTime(key1, value1, key2, value2) {
	var field = key1;
	var field2 = key2;
	var obj = {};
	var obj2 = {};
	
	document.getElementById(key1).innerHTML = value1;
	document.getElementById(key2).innerHTML = value2;

	obj[field] = value1;
	obj2[field2] = value2;
	Object.assign(obj, obj2);

	var myJSON = JSON.stringify(obj);
	websocket.send(myJSON); 
	//console.log(myJSON); 
}

 
// Called when a message is received from the server
function onMessage(event) {

 
    // Print out our received message
    // console.log("Received: " + event.data);
let data = JSON.parse(event.data);
//var string = event.data;
console.log(data);
	
//  console.log(k);
/*
if (string.charAt(0) == 'G'){
	
	if (string.charAt(1) == 'C'){// receive targetCelsius1 parameter
		var residu = string.slice(2, string.length);
		document.getElementById("targetTemperature1").innerHTML = residu;		
		targetCelsius1 = parseInt(residu);
	}
	else if (string.charAt(1) == 'C'){// TODO
		var residu = string.slice(2, string.length);
		document.getElementById("targetTemperature3").innerHTML = residu;		
		targetCelsius3 = parseInt(residu);
	}	
	else if (string.charAt(1) == 'D'){
		var residu = string.slice(2, string.length);	
		document.getElementById("targetTemperature2").innerHTML = residu;
		targetCelsius2 = parseInt(residu);
	}
	else if (string.charAt(1) == 'D'){ // TODO
		var residu = string.slice(2, string.length);	
		document.getElementById("targetTemperature4").innerHTML = residu;
		targetCelsius4 = parseInt(residu);
	}		

	else if (string.charAt(1) == 'H'){
		var residu = string.slice(2, string.length);	
		document.getElementById("targetHumidMax").innerHTML = residu;
		humidmax = parseInt(residu);
	}

	else if (string.charAt(1) == 'h'){
		var residu = string.slice(2, string.length);	
		document.getElementById("targetHumidMin").innerHTML = residu;
		humidmin = parseInt(residu);
	}	
	
	else if (string.charAt(1) == 'H'){ // TODO
		var residu = string.slice(2, string.length);	
		document.getElementById("targetHumidMax2").innerHTML = residu;
		humidmax2 = parseInt(residu);
	}

	else if (string.charAt(1) == 'h'){ // TODO
		var residu = string.slice(2, string.length);	
		document.getElementById("targetHumidMin2").innerHTML = residu;
		humidmin2 = parseInt(residu);
	}	
	
	else if (string.charAt(1) == 'l'){// failsafe to preven ongoing alarm1 firing when conditions are met
		var residu = string.slice(2, string.length);	
		//console.log(residu);
		hourStart = residu.slice(0, 2);	
		minuteStart = residu.slice(2, 4);
		hourStop = residu.slice(4, 6);
		minuteStop = residu.slice(6, 8);

		document.getElementById("lightsON").value = hourStart +':' + minuteStart;
		document.getElementById("lightsOFF").value = hourStop +':' + minuteStop;
	}
	
	else if (string.charAt(1) == 'l'){// failsafe to preven ongoing alarm1 firing when conditions are met TODO
		var residu = string.slice(2, string.length);	
		//console.log(residu);
		hourStart2 = residu.slice(0, 2);	
		minuteStart2 = residu.slice(2, 4);
		hourStop2 = residu.slice(4, 6);
		minuteStop2 = residu.slice(6, 8);

		document.getElementById("lightsON2").value = hourStart2 +':' + minuteStart2;
		document.getElementById("lightsOFF2").value = hourStop2 +':' + minuteStop2;
	}	
	
    else if (string.charAt(1) == 'N'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1J2").checked = false;
		//alarmReachTemp2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1J2").checked = true;
		//alarmReachTemp2 = true;
		}
	}	
	
    else if (string.charAt(1) == 'G'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1G1").checked = false;
		//alarmReachTemp2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1G1").checked = true;
		//alarmReachTemp2 = true;
		}
	}

    else if (string.charAt(1) == 'r'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1G2").checked = false;
		//alarmReachTemp2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1G2").checked = true;
		//alarmReachTemp2 = true;
		}
	}

    else if (string.charAt(1) == 'G'){// TODO
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1G3").checked = false;
		//alarmReachTemp2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1G3").checked = true;
		//alarmReachTemp2 = true;
		}
	}

    else if (string.charAt(1) == 'r'){// TODO
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1G4").checked = false;
		//alarmReachTemp2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1G4").checked = true;
		//alarmReachTemp2 = true;
		}
	}	
	
	else if (string.charAt(1) == 'O'){// receive alarmTime1 parameter
		var residu = string.slice(2, string.length);
		document.getElementById("offsetFromTargetTempMax").innerHTML = residu;
		offsetFromTargetTempMax = parseInt(residu);
	}
	
	else if (string.charAt(1) == 'o'){// receive alarmTime1 parameter
		var residu = string.slice(2, string.length);
		document.getElementById("offsetFromTargetTempMin").innerHTML = residu;
		offsetFromTargetTempMin = parseInt(residu);
	}
	
    else if (string.charAt(1) == 'Q'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L1").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L1").checked = true;
		}
	}
	
	else if (string.charAt(1) == 'q'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L2").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L2").checked = true;
		}
	}

	else if (string.charAt(1) == 'q'){// sets alarm1 when targetCelsius 1 is reached. TODO
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L6").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L6").checked = true;
		}
	}		
	
	else if (string.charAt(1) == 'g'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L3").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L3").checked = true;
		}
	}
	
	else if (string.charAt(1) == 'g'){// sets alarm1 when targetCelsius 1 is reached. TODO
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L7").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L7").checked = true;
		}
	}	

	else if (string.charAt(1) == 's'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1L4").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1L4").checked = true;
		}
	}	
	
    else if (string.charAt(1) == 'R'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1M1").checked = false;
		}
		else if (residu == '1'){
		document.getElementById("1M1").checked = true;
		}
	}	
	
    else if (string.charAt(1) == 'S'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		document.getElementById("probe_number").value = residu;
	}
    else if (string.charAt(1) == 'E'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		document.getElementById("probe_numberH").value = residu;
	}

    else if (string.charAt(1) == 'E'){// sets alarm1 when targetCelsius 1 is reached. TODO
		var residu = string.slice(2, string.length);	
		document.getElementById("operation_mode").value = residu;
	}		
	
	else if (string.charAt(1) == 'e'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		document.getElementById("graph_time").value = residu;
	}	
	
    else if (string.charAt(1) == 'T'){// sets alarm1 when targetCelsius 1 is reached.
		var residu = string.slice(2, string.length);	
		document.getElementById("probe_id").value = residu;
	}	
	
	else if (string.charAt(1) == 'U'){// checkBox - activates alarm1 Timer checkbox (alarmTime1)
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1T1").checked = false;
		//alarmActiveTimer2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1T1").checked = true;
		//alarmActiveTimer2 = true;
		}
	}

	else if (string.charAt(1) == 'X'){
		var residu = string.slice(2, string.length);	
		if (residu == '0'){
		document.getElementById("1X1").checked = false;
		//alarmActiveTimer2 = false;
		}
		else if (residu == '1'){
		document.getElementById("1X1").checked = true;
		//alarmActiveTimer2 = true;
		}
	}	
	
	else if (string.charAt(1) == 'V'){// checkBox - activates alarm1 Timer checkbox (alarmTime1)
		var numArgs = 0;
		var pos1 = 1;
		var pos2 = 0;
		var cal_values = new Array(5)
		var altString = string.slice(1, string.length);
		//console.log(altString);
		for( var t = 0; t < altString.length; t++ ){
			if (altString[t] == '+'){
				pos2 = t;
				var cal = altString.substring(pos1, pos2);
				cal_values[numArgs] = cal;		
				numArgs = numArgs+1;
				pos1 = t+1;		
			}
		}	
		document.getElementById("cal_val1").innerHTML = cal_values[0];
		document.getElementById("cal_val2").innerHTML = cal_values[1];
		document.getElementById("cal_val3").innerHTML = cal_values[2];
		document.getElementById("cal_val4").innerHTML = cal_values[3];
		document.getElementById("cal_val5").innerHTML = cal_values[4];
	}

	else if (string.charAt(1) == 'W'){// checkBox - activates alarm1 Timer checkbox (alarmTime1)
		var numArgs = 0;
		var pos1 = 1;
		var pos2 = 0;
		var pid_cal_values = new Array(3)
		var altString = string.slice(1, string.length);
		//console.log(altString);
		for( var t = 0; t < altString.length; t++ ){
			if (altString[t] == '+'){
				pos2 = t;
				var cal = altString.substring(pos1, pos2);
				pid_cal_values[numArgs] = cal;		
				numArgs = numArgs+1;
				pos1 = t+1;		
			}
		}	
		document.getElementById("pid_val1").innerHTML = pid_cal_values[0];
		document.getElementById("pid_val2").innerHTML = pid_cal_values[1];
		document.getElementById("pid_val3").innerHTML = pid_cal_values[2];
	}
	
	else if (string.charAt(1) == 'Y'){// receive alarmTime1 parameter
		var residu = string.slice(2, string.length);
		document.getElementById("1Y1").innerHTML = residu;

	}
	
	else {
	};
	
	if (k < 24){
	//console.log("k "); console.log(k);
    doSend("GGG"+k);
	k = k + 1;
    }
}
else if (string.charAt(0) == 'H'){
	var numArgs = 0;
	var pos1 = 1;
	var pos2 = 0;
	var humid_values = new Array(6)
	var fullString = string.slice(1, string.length);
	for( var t = 0; t < string.length; t++ ){
		if (string[t] == '+'){
			pos2 = t;
			var temp = string.substring(pos1, pos2);
			humid_values[numArgs] = temp;		
			numArgs = numArgs+1;
			pos1 = t+1;		
		}
	}
	
	for (var x = 0; x < numArgs; x ++){
	residu = humid_values[x]
		if (x == 0){
		humidity = residu;
		document.getElementById("humid1").innerHTML = residu;
			if ((residu < humidmin-10 && document.getElementById("1G1").checked == true) || (residu > humidmax+10 && document.getElementById("1G1").checked == true)){ //;tempOffsetAlarm == true){  // alarmActiveTemp1
			//tempOffsetAlarm = false; // alarmActiveTemp1
			document.getElementById("1G1").checked = false;
			document.getElementById("1G2").checked = false;
			document.getElementById("1I1").checked = true;
			doSend("1G1"+0);
			doSend("1G2"+0);
			doSend('1RR'+2);
			//playSound1(100);	
			}
		
		}
		else if (x == 1){
		document.getElementById("DHTtemperature1").innerHTML = residu;
		}
		else if (x == 2){
		humidity2 = residu;
		document.getElementById("humid2").innerHTML = residu;
			if (document.getElementById("operation_mode").value == "2"){
				if ((residu < humidmin2-10 && document.getElementById("1G3").checked == true) || (residu > humidmax2+10 && document.getElementById("1G4").checked == true)){ //;tempOffsetAlarm == true){  // alarmActiveTemp1
				//tempOffsetAlarm = false; // alarmActiveTemp1
				document.getElementById("1G3").checked = false;
				document.getElementById("1G4").checked = false;
				document.getElementById("1I1").checked = true;
				doSend("1G3"+0);
				doSend("1G4"+0);
				doSend('1RR'+2);
				//playSound1(100);	
				}
		}
		else if (x == 3){
		document.getElementById("DHTtemperature2").innerHTML = residu;
		}		
		else if (x == 4){
		document.getElementById("humid3").innerHTML = residu;
		}
		else if (x == 5){
		document.getElementById("DHTtemperature3").innerHTML = residu;
		}		
	}	
}
else if (string.charAt(0) == 'T'){
	var numArgs = 0;
	var pos1 = 1;
	var pos2 = 0;
	var temp_values = new Array(5)
	var fullString = string.slice(1, string.length);
	for( var t = 0; t < string.length; t++ ){
		if (string[t] == '+'){
			pos2 = t;
			var temp = string.substring(pos1, pos2);
			temp_values[numArgs] = temp;		
			numArgs = numArgs+1;
			pos1 = t+1;		
		}
	}
	
	for (var x = 0; x < numArgs; x ++){
	residu = temp_values[x]
		if (x == 0){
		document.getElementById("temperature1").innerHTML = residu;
			if (targetCelsius1 > 0){
				if (offsetFromTargetTempMax > 1){
					if ((residu > targetCelsius1 + offsetFromTargetTempMax || residu < targetCelsius1 - offsetFromTargetTempMax) && document.getElementById("1M1").checked == true){ //;tempOffsetAlarm == true){  // alarmActiveTemp1
					//tempOffsetAlarm = false; // alarmActiveTemp1
					document.getElementById("1M1").checked = false;
					document.getElementById("1I1").checked = true;
					doSend("1M1"+0);
					doSend('1RR'+2);
					//playSound1(100);	
					}
				}
			}	
		}
		else if (x == 1){
		document.getElementById("temperature2").innerHTML = residu;
			if (targetCelsius2 > 0){
				if (residu >= targetCelsius2 && document.getElementById("1J2").checked == true){ // alarmReachTemp2 == true
				//alarmReachTemp2 = false;	
				document.getElementById("1J2").checked = false;	
				document.getElementById("1I1").checked = true;					
				doSend("1J2"+0);
				doSend('1RR'+1);
				//playSound1(100);				
				}
			}	
		}
		else if (x == 2){
		document.getElementById("temperature3").innerHTML = residu;
		soiltemp2=residu;
			if (targetCelsius3 > 0 && document.getElementById("operation_mode").value == "2"){
				if (offsetFromTargetTempMax2 > 1){
					if ((residu > targetCelsius3 + offsetFromTargetTempMax2 || residu < targetCelsius3 - offsetFromTargetTempMax2) && document.getElementById("1M2").checked == true){ //;tempOffsetAlarm == true){  // alarmActiveTemp1
					//tempOffsetAlarm = false; // alarmActiveTemp1
					document.getElementById("1M2").checked = false;
					document.getElementById("1I1").checked = true;
					doSend("1M2"+0);
					doSend('1RR'+2);
					//playSound1(100);	
					}
				}
			}
		}	
		else if (x == 3){
		document.getElementById("temperature4").innerHTML = residu;
			if (targetCelsius4 > 0 && document.getElementById("operation_mode").value == "2"){
				if (residu >= targetCelsius4 && document.getElementById("1J1").checked == true){ // alarmReachTemp2 == true
				//alarmReachTemp2 = false;	
				document.getElementById("1J1").checked = false;	
				document.getElementById("1I1").checked = true;					
				doSend("1J1"+0);
				doSend('1RR'+1);
				//playSound1(100);				
				}
			}
		}
		else if (x == 4){
		document.getElementById("temperature5").innerHTML = residu;
		}	
	}
	updateTime();	
}
else if (string.charAt(0) == 'S'){	
	if (string.charAt(1) == 'C'){
		var residu = string.slice(2, string.length);	
		var residuFloat = parseFloat(residu).toFixed(2);
		drawChart(residuFloat);
	}
	
	//else if (string.charAt(1) == 'D'){
	//	var residu = string.slice(2, string.length);	
	//	var residuFloat = parseFloat(residu).toFixed(2);
	//	drawChart1(residuFloat);
	//}	
	

    else if (string.charAt(1) == 'I'){
		var residu = string.slice(2, string.length);
		document.getElementById("fanSpeed").innerHTML = residu;	
		fanSpeed = residu;	
		//console.log(fanSpeed);
	}
}
else if (string.charAt(0) == 'R'){
	if (string.charAt(1) == 'P'){
		var residu = string.slice(2, string.length);
		//console.log('redidu pass'); console.log(residu);
		document.getElementById("PASS").innerHTML = residu;	
	}
	else if (string.charAt(1) == 'I'){
		var residu = string.slice(2, string.length);
		//console.log('redidu ssid'); console.log(residu);
		document.getElementById("SSID").innerHTML = residu;	
	}	
}	
}	
 
// Sends a message to the server (and prints it to the console)

//function doSend(message) {
//	String(message);
//   //console.log("Sending: " + message);
//   websocket.send(message);
}
*/	
	
</script>	

<script src="https://code.highcharts.com/highcharts.js"></script>

<script>
 	var chartT = new Highcharts.Chart({
            chart: { renderTo : 'chart-temperature',
					backgroundColor: '#808080',
			},
            title: { text: 'Temperature History',
						style: {color: '#ffffff',}
					},
            series: [
                {
                    showInLegend: true,
                    name: 'Soil temp',
                    data: [],
                    color: '#ff0000'
                }, 
                {
                    showInLegend: true,
                    name: 'target Temp',
                    data: [], 
                    color: '#0000ff'
                },
				{
                    showInLegend: true,
                    name: 'Air temp',
                    data: [],
                    color: '#ffff00'
                },
				{
                    showInLegend: true,
                    name: 'fanSpeed %',
                    data: [], 
                    color: '#00ff00'
                },
				{
                    showInLegend: true,
                    name: 'humidity %',
                    data: [], 
                    color: '#00ffff'
                },
				{
                    showInLegend: true,
                    name: 'Soil temp2',
                    data: [],
                    color: '#ff0000'
                }, 
                {
                    showInLegend: true,
                    name: 'target Temp2',
                    data: [], 
                    color: '#0000ff'
                },
				{
                    showInLegend: true,
                    name: 'Air temp2',
                    data: [],
                    color: '#ffff00'
                },
				{
                    showInLegend: true,
                    name: 'humidity2 %',
                    data: [], 
                    color: '#00ffff'
                }

            ],
			tooltip: {
				valueSuffix: '\xB0 C'
			},
			 plotOptions: {
				line: {
					lineWidth: 2,
					states: {
						hover: {
							lineWidth: 3
						}
					},
					
					marker: {
						enabled: false
					}
					
				}
			},
			legend: {
				itemStyle: {
					color: 'white'
				}  
			},
            xAxis: { 
               type: 'datetime',
               dateTimeLabelFormats: { second: '%H:%M:%S' },
			   title: { style: {color:"#ffffff"}},
			   labels: { style: {color:"#ffffff"}}
            },
            yAxis: {
                title: { text: 'Temperature (Celsius)',
						 style: {color:"#ffffff"}},
				labels: { style: {color:"#ffffff"}}
            },
            credits: { enabled: false }
        });
function drawChart(temp){
            var x = (new Date()).getTime();
			var currentCelsius = parseFloat(temp);
			var currentAirCelsius = parseFloat(airtemp);
			var currentFanSpeed = parseFloat(fanSpeed);
			var currentHumidity = parseFloat(humidity);
			if(chartT.series[0].data.length > 1440) {
				chartT.series[0].addPoint([x, currentCelsius], true, true, true);
				chartT.series[2].addPoint([x, currentAirCelsius], true, true, true);
				chartT.series[3].addPoint([x, currentFanSpeed], true, true, true);
				chartT.series[4].addPoint([x, currentHumidity], true, true, true);
			} else {
				chartT.series[0].addPoint([x, currentCelsius], true, false, true);
				chartT.series[2].addPoint([x, currentAirCelsius], true, true, true);
				chartT.series[3].addPoint([x, currentFanSpeed], true, false, true);
				chartT.series[4].addPoint([x, currentHumidity], true, false, true);
			}
            if (targetCelsius1 > 0) {
                if(chartT.series[1].data.length > 1440) {
                    chartT.series[1].addPoint([x, targetCelsius1], true, true, true);
                } else {
                    chartT.series[1].addPoint([x, targetCelsius1], true, false, true);
                }
            }
			
//function drawChart1(temp){
if (document.getElementById("operation_mode").value == "2"){
			//var x = (new Date()).getTime();
			var currentCelsius = parseFloat(soiltemp2);
			var currentAirCelsius = parseFloat(airtemp2);
			//var currentFanSpeed = parseFloat(fanSpeed);
			var currentHumidity = parseFloat(humidity2);
			if(chartT.series[5].data.length > 1440) {
				chartT.series[5].addPoint([x, currentCelsius], true, true, true);
				chartT.series[7].addPoint([x, currentAirCelsius], true, true, true);
				//chartT.series[8].addPoint([x, currentFanSpeed], true, true, true);
				chartT.series[8].addPoint([x, currentHumidity], true, true, true);
			} else {
				chartT.series[5].addPoint([x, currentCelsius], true, false, true);
				chartT.series[7].addPoint([x, currentAirCelsius], true, true, true);
				//chartT.series[3].addPoint([x, currentFanSpeed], true, false, true);
				chartT.series[8].addPoint([x, currentHumidity], true, false, true);
			}
            if (targetCelsius3 > 0) {
                if(chartT.series[6].data.length > 1440) {
                    chartT.series[6].addPoint([x, targetCelsius3], true, true, true);
                } else {
                    chartT.series[6].addPoint([x, targetCelsius3], true, false, true);
                }
            }	
}
};

/*
function drawChart1(temp){
            var x = (new Date()).getTime();
			var currentCelsius = parseFloat(temp);
			if(chartT.series[2].data.length > 1440) {
				chartT.series[2].addPoint([x, currentCelsius], true, true, true);
			} else {
				chartT.series[2].addPoint([x, currentCelsius], true, false, true);
			}
};
*/
</script>

<script>
function selectProbeTType(event) {
    //var selected_text = event.options[event.selectedIndex].innerHTML;
	//console.log("text "); console.log(selected_text);
    var selected_value = event.value;
	//console.log("value "); console.log(selected_value);
	doSend('1ST'+selected_value);
}

function selectProbeTAmount(event) {
    var selected_value = event.value;
	doSend('1SN'+selected_value);
}

function selectProbeHType(event) {
    var selected_value = event.value;
	
	//doSend('1ST'+selected_value);
}

function selectProbeHAmount(event) {
    var selected_value = event.value;
	doSend('1HN'+selected_value);
}

function selectOperationMode(event){
    var selected_value = event.value;
	doSend('1OM'+selected_value);
}

function selectUpdateGraphTime(event) {
    var selected_value = event.value;
	doSend('1Z1'+selected_value);
}

function updateButton(fixedVariable) { 
	if (document.getElementById(fixedVariable).checked == true){			
		if (fixedVariable == '1I1'){
		clearInterval(refreshIntervalId1); 
		document.getElementById("1I1").checked = false;
		//doSend('1I1'+0);
		}
		else if (fixedVariable == '1U1'){
//		document.getElementById("1U1").checked = true;
		doSend('1U1');
		}		
		else {
		doSend(fixedVariable+1);
		}
		}
	else if (document.getElementById(fixedVariable).checked == false){	
		if (fixedVariable == '1I1'){
		clearInterval(refreshIntervalId1);
		document.getElementById("1I1").checked = false;
		//doSend('1I1'+0);
		}					
		else {
		doSend(fixedVariable+0);
	}  
	}
	}

function playSound1(repeats){
		numberofRingsAlarm1=repeats;
		var sound = new Audio('/alarm.mp3');
		sound.play();
			if (numberofRingsAlarm1 > 1){
			refreshIntervalId1 = setInterval(function(){
			var sound = new Audio('/alarm.mp3');
			sound.play(); 
			timer1Counter = timer1Counter + 1;
			blockSound1(numberofRingsAlarm1, timer1Counter);
			}, 2900);
			}
	}			
	
</script>
<script>
	function blockSound1(numberofRings, timerCounter){
		if (timerCounter >= numberofRings){
		clearInterval(refreshIntervalId1);
		document.getElementById("1I1").checked = false;
		//console.log("switches alarm sign off");
		}
	}
</script>

<script>
/*
function setTab(fixedVariable) {
  var x = document.getElementById(fixedVariable);
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
*/
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

<script>
function updateTime(){
        var momentNow = moment();
        $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                            + momentNow.format('dddd')
                             .substring(0,3).toUpperCase());
        $('#time-part').html(momentNow.format('HH:mm:ss'));
		
		var currentD = new Date();
		var startLights = new Date();
		startLights.setHours(hourStart,minuteStart);
		
		var endLights = new Date();
		endLights.setHours(hourStop,minuteStop); 

		if(currentD >= startLights && currentD < endLights ){
			if (document.getElementById("1L2").checked == false){
				doSend('1L2'+1);
			}
		}
		else{
			if (document.getElementById("1L2").checked == true)
			doSend('1L2'+0);
			}

		var startLights2 = new Date();
		startLights2.setHours(hourStart2,minuteStart2);
		
		var endLights2 = new Date();
		endLights2.setHours(hourStop2,minuteStop2); 

		if(currentD >= startLights2 && currentD < endLights2 ){
			if (document.getElementById("1L6").checked == false){
				doSend('1L6'+1);
			}
		}
		else{
			if (document.getElementById("1L6").checked == true)
			doSend('1L6'+0);
			}

		
		}
</script>

<script>
function openTab(fixedVariable, evt, cityName) {
if (fixedVariable == '1Z1'){
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z2'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z3'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z4'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z5'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z6'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z7').checked = false;
}
else if (fixedVariable == '1Z7'){
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
}

if (document.getElementById(fixedVariable).checked == true){
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
  }
  else {
  document.getElementById(fixedVariable).checked = false;
  document.getElementById(cityName).style.display = "none";
  }
}

function toggleoff(parentElement){
parentElement.style.display='none';
document.getElementById('1Z1').checked = false;
document.getElementById('1Z2').checked = false;
document.getElementById('1Z3').checked = false;
document.getElementById('1Z4').checked = false;
document.getElementById('1Z5').checked = false;
document.getElementById('1Z6').checked = false;
document.getElementById('1Z7').checked = false;
}

</script>
  
</body>